<div id="disqus_thread"></div>
<script>
    window.addEventListener('message', receiveMessage, false);
    function receiveMessage(event)
    {
        if (event.data) {
            var msg;
            try {
                msg = JSON.parse(event.data);
            } catch (err) {
            // Do nothing
        }
        if (!msg)
            return false;
        // 自动加载评论高度
        if (msg.name === 'resize' || msg.name === 'rendered') {
            window.parent.postMessage({
              sentinel: 'amp',
              type: 'embed-size',
              height: msg.data.height
          }, '*');
        }
    }
}
// 获取 page url & page identifier
function getQueryVariable(variable) {
        var query = window.location.search.substring(1);
        var vars = query.split("&");
        for (var i=0;i<vars.length;i++) {
            var pair = vars[i].split("=");
            if(pair[0] == variable){return pair[1];}
        }
        return(false);
    }
// page url & page identifier 的调用, 用于识别评论来源
var disqus_config = function () {
    this.page.url = decodeURIComponent(getQueryVariable("url")); 
    this.page.identifier = this.page.url; 
};
    (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');

        s.src = '//drivereasy.disqus.com/embed.js'; // "drivereasy" 为 DE disqus 的 shortname

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
